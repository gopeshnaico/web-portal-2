(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{9767:function(e,t,r){"use strict";var n=r(8687),a=r(6521),c=r(4155).env.NEXT_PUBLIC_API_URL||"";t.Z=function(e){var t=(0,a.C)((function(e){return e.authSession})),r={authorization:"Bearer ".concat(t.authToken)};return new n.GraphQLClient(c,{credentials:"include",headers:r})}},7566:function(e,t,r){"use strict";r.d(t,{B:function(){return O}});var n=r(29),a=r(9499),c=r(7794),o=r.n(c),s=r(7294),i=r(1163),u=r(7110),l=r(9767),d=r(3443),f=r(5675),h=r.n(f),b=r(391),p=r(5007),v=r(2410),g=r(7838),m=r(5893),x=function(e){var t=e.updateCategories,r=e.categoryData,n=e.setCategoryData,a=(0,i.useRouter)(),c=((0,g.$G)().t,null===r||void 0===r||!r.find((function(e){return!0===e.isChecked}))),o="/categories"===(null===a||void 0===a?void 0:a.pathname)?"Save":"Next";return(0,m.jsxs)("div",{className:"py-6 mx-auto w-full sm:w-8/12 md:w-8/12 lg:w-8/12 xl:w-6/12","data-testid":"cardDiv",children:[(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsxs)("div",{children:[(0,m.jsx)(p.Z,{className:"mt-8 mb-2 text-2xl",labelText:"Select your categories of interest"}),(0,m.jsx)("p",{className:"mb-2",children:"Select atleast one to serve you better"})]})}),(0,m.jsx)("div",{className:"clear-both"}),(0,m.jsxs)("div",{className:"bg-slate-100 border-2 border-slate-200 mb-10 p-3 mx-auto shadow-lg rounded-lg w-full sm:p-4",children:[(0,m.jsx)("div",{className:"category-checkbox-main-outer",children:null===r||void 0===r?void 0:r.map((function(e){return(0,m.jsx)("div",{className:"float-left w-full md:w-4/12 lg:w-4/12 w-6/12 category-checkbox-outer",children:(0,m.jsxs)("label",{className:"category-checkbox",children:[(0,m.jsxs)("div",{className:"category-checkbox-txt",children:[(0,m.jsx)(h(),{src:e.Asset.AssetStore.storage,width:70,height:70,unoptimized:!0}),(0,m.jsx)("div",{className:"clear-both"}),e.name]}),(0,m.jsx)(v.Z,{isChecked:e.isChecked,onChange:function(){return function(e){var t=r.map((function(t){return t.id===e&&(t.isChecked=!t.isChecked),t}));n(t)}(e.id)}}),(0,m.jsx)("span",{className:"checkmark"})]})},e.id)}))}),(0,m.jsx)("div",{className:"clear-both"})]}),(0,m.jsx)("div",{className:"clear-both"}),(0,m.jsxs)("div",{className:"w-full mt-4 text-right",children:["/categories"===(null===a||void 0===a?void 0:a.pathname)&&(0,m.jsx)("div",{className:"w-auto mt-4 md:inline-block ",children:(0,m.jsx)(b.Z,{className:"px-8 h-10 leading-10 w-auto bg-gray-200 rounded-3xl mr-3 hover:bg-gray-300 inline-block",label:"Back",type:"button",onClick:function(){return null===a||void 0===a?void 0:a.back()}})}),(0,m.jsx)(b.Z,{isDisabled:c,onClick:function(){t()},className:"px-8 h-10 leading-10 w-auto bg-blue-500 rounded-3xl  inline-block text-white ".concat(c?"opacity-70 hover:bg-blue-500":"hover:bg-blue-400"),label:o,type:"button"})]})]})};function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(){var e=(0,i.useRouter)(),t=(0,s.useState)(!1),r=t[0],a=t[1],c=(0,s.useState)({}),f=c[0],h=c[1],b=(0,s.useState)([]),p=b[0],v=b[1],g=(0,u.Ei)((0,l.Z)(),{}).data,y=(0,u.$N)((0,l.Z)(),{}).data,O=null===y||void 0===y?void 0:y.userPreferences;(0,s.useEffect)((function(){var e,t=null===g||void 0===g||null===(e=g.categories)||void 0===e?void 0:e.map((function(e){var t=!(null===O||void 0===O||!O.find((function(t){return t.categoryHeaderId===e.id})));return j(j({},e),{},{isChecked:t})}));v(t)}),[g,O]);var k=(0,u.li)((0,l.Z)()),w=function(){var t=(0,n.Z)(o().mark((function t(){var r,n,c,s,i,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p.filter((function(e){return!0===e.isChecked})),n=p.filter((function(e){return!1===e.isChecked})),c=r.map((function(e){return{categoryHeaderId:e.id}})),s=n.map((function(e){var t;return{channelId:{equals:null===O||void 0===O||null===(t=O.find((function(t){return t.categoryHeaderId===e.id})))||void 0===t?void 0:t.channelId},categoryHeaderId:{equals:e.id}}})),0===r.length){t.next=8;break}return i={data:{UserPreference:{createMany:{data:c}}}},t.next=8,k.mutateAsync(i).then((function(t){t.updateUser&&e.push("/dashboard")})).catch((function(e){a(!0),h(e.response)}));case 8:if(0===n.length){t.next=12;break}return u={data:{UserPreference:{deleteMany:s}}},t.next=12,k.mutateAsync(u).then((function(t){t.updateUser&&e.push("/dashboard")})).catch((function(e){a(!0),h(e.response)}));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[r&&(0,m.jsx)(d.q,{error:f,setErrorOpen:a}),(0,m.jsx)(x,{updateCategories:w,categoryData:p,setCategoryData:v})]})}},2410:function(e,t,r){"use strict";var n=r(9499),a=r(4730),c=r(5893),o=["size","backgroundColor","onChange","isChecked","className","defaultChecked"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){e.size,e.backgroundColor;var t=e.onChange,r=e.isChecked,n=(e.className,e.defaultChecked),s=(0,a.Z)(e,o);return(0,c.jsx)("input",i(i({type:"checkbox",className:"default:ring-2 mr-2 mt-3"},s),{},{onChange:t,checked:r,defaultChecked:n}))}},5007:function(e,t,r){"use strict";var n=r(5893);t.Z=function(e){var t=e.labelText,r=e.className;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("h1",{className:r,children:t})})}},1650:function(e,t,r){"use strict";r.r(t);var n=r(7566),a=r(5893);t.default=function(){return(0,a.jsx)(n.B,{})}},7353:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-enroll/categories",function(){return r(1650)}])},4730:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}r.d(t,{Z:function(){return n}})}},function(e){e.O(0,[982,75,774,888,179],(function(){return t=7353,e(e.s=t);var t}));var t=e.O();_N_E=t}]);